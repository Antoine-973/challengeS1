import{_ as g}from"./connexion-6655cd8d.js";import{a as u,w as v}from"./runtime-dom.esm-bundler-29d64e14.js";import{Q as y,r as x,O as b,Y as S,o as w,c as h,b as s,a0 as m,f as c,w as _,Z as f}from"./runtime-core.esm-bundler-4092eae4.js";import{u as k,b as j}from"./index-4967faab.js";import"./vue-router-efb649a8.js";const C={class:"grid grid-cols-12 justify-center p-8"},T=["onSubmit"],V={class:"grid grid-cols-12 gap-6 justify-center p-8"},M={class:"col-span-6 form-control w-full"},P=s("label",{for:"email",class:"label"},"Email",-1),$={class:"col-span-6 form-control w-full"},N=s("label",{for:"password",class:"label"},"Mot de passe",-1),B={class:"col-span-12 w-full"},E=["disabled"],O={class:"col-span-12 pr-8 text-right"},A={__name:"LoginForm",props:{submit:{type:Function,required:!0}},setup(p){const r=p,e=y({email:"",password:""}),t=x(!1),o=b("SnackbarProvider:openSnackbar"),a=async()=>{if(t.value=!0,e.email&&e.password)try{await r.submit(e),e.email=null,e.password=null,setTimeout(()=>{t.value=!1},1e3)}catch{o({message:"Error during login",type:"error"}),setTimeout(()=>{t.value=!1},1e3)}else o({message:"Please fill all fields",type:"error"})};return(i,n)=>{const d=S("router-link");return w(),h("div",C,[s("form",{onSubmit:v(a,["prevent"]),class:"col-span-12"},[s("div",V,[s("div",M,[P,m(s("input",{type:"email",id:"email",name:"email","onUpdate:modelValue":n[0]||(n[0]=l=>e.email=l),autocomplete:"current-email",class:"input input-bordered w-full"},null,512),[[u,e.email]])]),s("div",$,[N,m(s("input",{type:"password",id:"password",name:"password","onUpdate:modelValue":n[1]||(n[1]=l=>e.password=l),autocomplete:"current-password",class:"input input-bordered w-full"},null,512),[[u,e.password]])]),s("div",B,[s("button",{type:"submit",class:"btn btn-primary w-full",disabled:t.value},"Connexion",8,E)])])],40,T),s("div",O,[c(d,{to:"/register",class:"btn-link"},{default:_(()=>[f("Tu n'as pas de compte ? Créer en un!")]),_:1}),c(d,{class:"px-8 btn-link",to:"/reset-password"},{default:_(()=>[f("Mot de passe oublié")]),_:1})])])}}},F={class:"grid grid-cols-12 grid-rows-1 h-screen w-full"},L=s("div",{class:"col-span-6"},[s("img",{src:g,alt:"login",class:"h-screen w-full object-cover"})],-1),U={class:"flex flex-col col-span-6 justify-center justify-items-center"},q=s("h1",{class:"text-4xl text-center"},"Connexion",-1),z={__name:"LoginView",setup(p){const r=k(),e=b("SnackbarProvider:openSnackbar"),t=async o=>{try{const i=await(await fetch(j+"/auth",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o)})).json();await r.login(i),e({message:"Connexion réussie",type:"success"})}catch(a){console.log(a)}};return(o,a)=>(w(),h("div",F,[L,s("div",U,[q,c(A,{submit:t})])]))}};export{z as default};
