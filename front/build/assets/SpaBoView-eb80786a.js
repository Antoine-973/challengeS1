import{_ as L}from"./TemplateBO-bb583818.js";import{u as N,s as j}from"./index-4967faab.js";import{L as r}from"./LikeService-df6ad75c.js";import{_ as S}from"./_plugin-vue_export-helper-c27b6911.js";import{r as f,a4 as C,Y as A,o as _,c as u,b as t,f as v,F as b,a1 as P,t as s,w as R,d as V,Z as n,a5 as B,a6 as I}from"./runtime-core.esm-bundler-4092eae4.js";import"./vue-router-efb649a8.js";const c=i=>(B("data-v-e68631a7"),i=i(),I(),i),F={class:"flex justify-between mt-5"},M={class:"grow ml-32"},q=c(()=>t("h1",{class:"text-center mb-11 text-lg"},"Les demandes d'adoption",-1)),Y={class:"overflow-x-auto"},$={class:"table w-5/6 mt-12 justify-center"},E=c(()=>t("thead",null,[t("tr",null,[t("th"),t("th",null,"Nom animal"),t("th",null,"Date de naissance"),t("th",null,"Nom adopteur"),t("th",null,"Prénom adopteur"),t("th",null,"Actions")])],-1)),T={key:0},k=c(()=>t("th",null,null,-1)),O={class:"action-icon"},Z=c(()=>t("i",{class:"fas fa-eye"},null,-1)),z=["for"],G=c(()=>t("i",{class:"fas fa-check"},null,-1)),H=[G],J=["for"],K=c(()=>t("i",{class:"fas fa-close"},null,-1)),Q=[K],U=["id"],W={class:"modal"},X={class:"modal-box"},tt={class:"font-bold text-lg"},et={class:"container-info-request"},st={class:"py-4"},at={class:"py-4"},ot={class:"py-4"},nt={class:"py-4"},ct=c(()=>t("p",{class:"text-warning"},[t("strong",null,"Cette action est irreversible.")],-1)),lt={class:"modal-action"},it=["onClick"],dt=["for"],rt=["id"],_t={class:"modal"},ut={class:"modal-box"},ht={class:"font-bold text-lg"},mt={class:"container-info-request"},pt={class:"py-4"},ft={class:"py-4"},vt={class:"py-4"},bt={class:"py-4"},wt=c(()=>t("p",{class:"text-warning"},[t("strong",null,"Cette action est irreversible.")],-1)),yt={class:"modal-action"},gt=["onClick"],xt=["for"],Dt={__name:"SpaBoView",setup(i){const h=f(null),w=N(),{user:m}=j(w),d=f(null),y=async a=>{const o=await r().getLikes("is_pending=true");d.value=await o.json()};C(async()=>{if(m.value.roles.includes("ROLE_ADMIN"))d.value=await r().getLikes("is_pending=true");else{const a=await y(m.value.spa.id);d.value=a.value.filter(o=>o.animal.spa.id===id)}});const g=async(a,o)=>{await(await r().patchAcceptLikes(a,o)).json(),window.location.href="/back-office/likes",p(a)},x=async(a,o)=>{await(await r().patchRejectLikes(a,o)).json(),window.location.href="/back-office/likes",p(a)},p=a=>{const o=h.value.findIndex(l=>l.id===a);h.value[o].isPending=!1};return(a,o)=>{const l=A("router-link");return _(),u("main",null,[t("div",F,[v(L),t("div",M,[q,t("div",Y,[t("table",$,[E,t("tbody",null,[(_(!0),u(b,null,P(d.value,e=>(_(),u(b,{key:e.id},[e.isPending?(_(),u("tr",T,[k,t("th",null,s(e.animal.name),1),t("th",null,s(new Date(e.animal.birthday).getDate()+"/"+(new Date(e.animal.birthday).getMonth()+1)+"/"+new Date(e.animal.birthday).getFullYear()),1),t("th",null,s(e.user.lastname),1),t("th",null,s(e.user.firstname),1),t("th",O,[v(l,{to:"likes/"+e.id},{default:R(()=>[Z]),_:2},1032,["to"]),t("label",{for:"accept"+e.id,class:"request-icon"},H,8,z),t("label",{for:"reject"+e.id,class:"request-icon"},Q,8,J)])])):V("",!0),t("input",{type:"checkbox",id:"accept"+e.id,class:"modal-toggle"},null,8,U),t("div",W,[t("div",X,[t("h3",tt,"Êtes-vous sûr de vouloir accepter la demande d'adoption N°"+s(e.id)+" ?",1),t("div",et,[t("div",null,[t("p",st,[n("Nom animal : "),t("em",null,s(e.animal.name),1)]),t("p",at,[n("Date de naissance : "),t("em",null,s(new Date(e.animal.birthday).getDate()+"/"+(new Date(e.animal.birthday).getMonth()+1)+"/"+new Date(e.animal.birthday).getFullYear()),1)])]),t("div",null,[t("p",ot,[n("Nom adopteur : "),t("em",null,s(e.user.lastname),1)]),t("p",nt,[n("Prénom adopteur : "),t("em",null,s(e.user.firstname),1)])])]),ct,t("div",lt,[t("button",{onClick:D=>g(e.id,e.user.email),class:"btn"},"Accepter",8,it),t("label",{for:"accept"+e.id,class:"btn"},"Annuler",8,dt)])])]),t("input",{type:"checkbox",id:"reject"+e.id,class:"modal-toggle"},null,8,rt),t("div",_t,[t("div",ut,[t("h3",ht,"Êtes-vous sûr de vouloir refuser la demande d'adoption N°"+s(e.id)+" ?",1),t("div",mt,[t("div",null,[t("p",pt,[n("Nom animal : "),t("em",null,s(e.animal.name),1)]),t("p",ft,[n("Date de naissance : "),t("em",null,s(new Date(e.animal.birthday).getDate()+"/"+(new Date(e.animal.birthday).getMonth()+1)+"/"+new Date(e.animal.birthday).getFullYear()),1)])]),t("div",null,[t("p",vt,[n("Nom adopteur : "),t("em",null,s(e.user.lastname),1)]),t("p",bt,[n("Prénom adopteur : "),t("em",null,s(e.user.firstname),1)])])]),wt,t("div",yt,[t("button",{onClick:D=>x(e.id,e.user.email),class:"btn"},"Refuser",8,gt),t("label",{for:"reject"+e.id,class:"btn"},"Annuler",8,xt)])])])],64))),128))])])])])])])}}},Pt=S(Dt,[["__scopeId","data-v-e68631a7"]]);export{Pt as default};
