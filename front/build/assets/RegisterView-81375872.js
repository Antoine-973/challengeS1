import{_ as b}from"./connexion-6655cd8d.js";import{a,w}from"./runtime-dom.esm-bundler-29d64e14.js";import{Q as h,r as y,O as v,Y as g,o as u,c as p,b as e,a0 as n,f as m,w as P,Z as x}from"./runtime-core.esm-bundler-4092eae4.js";const V={class:"grid grid-cols-12 justify-center p-8"},j=["onSubmit"],S={class:"grid grid-cols-12 gap-6 justify-center p-8"},k={class:"col-span-6 form-control w-full"},U=e("label",{for:"firstname",class:"label"},"Prénom",-1),T={class:"col-span-6 form-control w-full"},C=e("label",{for:"lastname",class:"label"},"Nom de famille",-1),N={class:"col-span-6 form-control w-full"},$=e("label",{for:"birthdate",class:"label"},"Date de naissance",-1),O={class:"col-span-6 form-control w-full"},B=e("label",{for:"email",class:"label"},"Email",-1),D={class:"col-span-6"},E=e("label",{for:"password",class:"label"},"Mot de passe",-1),M={class:"col-span-6"},q=e("label",{for:"confirmPassword",class:"label"},"Confirmation du mot de passe",-1),F={class:"col-span-12 w-full"},I=["disabled"],J={__name:"UserForm",props:{submit:{type:Function,required:!0},defaultValues:{type:Object,defaultValues:{},required:!1}},setup(c){const i=c,s=h({firstname:"",lastname:"",birthdate:"",plainPassword:"",confirmPassword:"",email:"",roles:[]}),o=y(!1);for(const d in i.defaultValues)s[d]=i.defaultValues[d];const r=v("SnackbarProvider:openSnackbar"),f=async()=>{if(o.value=!0,s.plainPassword===s.confirmPassword)if(s.lastname&&s.firstname&&s.email&&s.plainPassword&&s.birthdate)try{await i.submit(s),s.plainPassword=null,s.confirmPassword=null,s.birthdate=null,s.firstname=null,s.lastname=null,s.email=null,s.roles=null,r({message:"User created verify your email",type:"success"}),setTimeout(()=>{o.value=!1},1e3)}catch{r({message:"Error during user creation",type:"error"}),setTimeout(()=>{o.value=!1},1e3)}else r({message:"Please fill all the fields",type:"error"});else r({message:"Passwords do not match",type:"error"})};return(d,t)=>{const _=g("router-link");return u(),p("div",V,[e("form",{onSubmit:w(f,["prevent"]),class:"col-span-12"},[e("div",S,[e("div",k,[U,n(e("input",{type:"text",id:"firstname","onUpdate:modelValue":t[0]||(t[0]=l=>s.firstname=l),autocomplete:"given-name",class:"input input-bordered w-full"},null,512),[[a,s.firstname]])]),e("div",T,[C,n(e("input",{type:"text",id:"lastname","onUpdate:modelValue":t[1]||(t[1]=l=>s.lastname=l),autocomplete:"family-name",class:"input input-bordered w-full"},null,512),[[a,s.lastname]])]),e("div",N,[$,n(e("input",{type:"date",id:"birthdate","onUpdate:modelValue":t[2]||(t[2]=l=>s.birthdate=l),class:"input input-bordered w-full"},null,512),[[a,s.birthdate]])]),e("div",O,[B,n(e("input",{type:"email",id:"email","onUpdate:modelValue":t[3]||(t[3]=l=>s.email=l),class:"input input-bordered w-full"},null,512),[[a,s.email]])]),e("div",D,[E,n(e("input",{type:"password",id:"password","onUpdate:modelValue":t[4]||(t[4]=l=>s.plainPassword=l),class:"input input-bordered w-full"},null,512),[[a,s.plainPassword]])]),e("div",M,[q,n(e("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":t[5]||(t[5]=l=>s.confirmPassword=l),class:"input input-bordered w-full"},null,512),[[a,s.confirmPassword]])]),e("div",F,[e("button",{disabled:o.value,type:"submit",class:"w-full btn btn-primary"},"Inscription",8,I)])])],40,j),m(_,{to:"/login",class:"col-span-12 pr-8 text-right btn-link"},{default:P(()=>[x("Déjà un compte ? Connecte-toi")]),_:1})])}}},Q={class:"grid grid-cols-12 grid-rows-1 h-screen w-full"},R=e("div",{class:"col-span-6"},[e("img",{src:b,alt:"login",class:"h-screen w-full object-cover"})],-1),Y={class:"flex flex-col col-span-6 justify-center justify-items-center"},Z=e("h1",{class:"text-4xl text-center"},"Inscription",-1),H={__name:"RegisterView",setup(c){const i=async s=>{try{const r=await(await fetch("https://localhost/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json()}catch(o){console.log(o)}};return(s,o)=>(u(),p("div",Q,[R,e("div",Y,[Z,m(J,{submit:i})])]))}};export{H as default};
